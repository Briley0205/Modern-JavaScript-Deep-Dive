## 📕 『모던 자바스크립트 Deep Dive』 오늘 읽은 내용 ✒

**TIL(Today I learn) 기록일** : 2022.07.29-30

### 15장 let,const 키워드와 블록 레벨 스코프 📑
---
### var 키워드의 문제점
#### 1. var 키워드는 중복 선언이 허용된다.<br>
초기화문이 있을 때 중복 선언 시 - var 키워드가 없는 것처럼 동작되어 값이 변경된다.<br>
초기화문이 없을 때 중복 선언 시 - 변수 선언문이 무시됨 (별도의 에러가 없다.)

즉 이미 선언된 변수에 중복 선언과 함께 값을 할당하게 되면 변수의 값이 변하게 된다.

#### 2. 함수 레벨 스코프이다.
var 키워드로 선언된 변수는 오로지 함수의 코드 블록만을 지역 스코프로 인정한다. for문과 같은 함수 외의 블록 내 var 변수는 전역 변수가 된다.

이는 이전 파트의 전역 변수의 문제점과 충돌하게 된다. 전역 변수를 지나치게 남발할 가능성을 높이는 것이다.

#### 3. 변수 호이스팅
변수 호이스팅은 변수 선언문을 스코프의 선두로 끌어 올린다. 선언문 이전에 참조할 수 있으며 할당문 이전에 변수를 참조하면 언제나 undefinded으로 반환된다. 

이는 가독성을 떨어뜨리고 오류의 여지를 남긴다.

---
### var vs let
#### 1. 변수 중복 선언 금지
var 키워드의 경우 이름이 동일한 변수를 중복 선언하면 변수 값이 재할당되며 에러가 발생하지 않는다.

하지만 ES6의 let 키워드의 경우 <strong>동일 스코프 내에서 중복 선언을 허용하지 않는다.</strong>

#### 2. 블록 레벨 스코프
var 키워드의 변수는 함수 레벨 스코프이나 let 키워드의 변수는 블록 레벨 스코프를 따른다. <strong>함수, if문, for문 등 모든 코드 블록을 지역 스코프로 인정한다.</strong> <br>그렇기 때문에 동일한 변수면이라도 전역에서 선언된 것(전역 변수)과 코드 블록 내에서 선언(지역 변수로 인정됨)된 두 변수는 별개이다. <br>또한 함수 내의 코드 블록은 함수 레벨 스코프에 중첩된다.

#### 3. 변수 호이스팅
let 키워드 변수의 변수 호이스팅 var 키워드와 차이점이 있다. 
<br>var 키워드 변수의 경우 런타임 이전에 자바스크립트 엔진에 의해 암묵적으로 "선언 단계"와 "초기화 단계"가 동시에 진행된다. 즉 선언 단계에서 식별자가 등록되고 즉시 초기화되어 undefinded이 할당된다.<br>

하지만 let 키워드 변수는 <u>"선언 단계"와 "초기화 단계"가 분리되어 진행된다.</u> 런타임 이전에 선언 단계가 먼저 실행되지만, 초기화 단계는 변수 선언문에 도달했을 때 실행된다. <br>그렇기 때문에 스코프의 시작 지점부터 초기화 단계 시작 지점까지 변수를 참조할 수 없다. 이를 일시적 사각지대라고 부른다.

이것은 마치 let 키워드 변수가 변수 호이스팅이 무시되는듯 보일 수 있지만 그렇지 않다. 이는 ES6에 도입된 let, const, class 모두에 적용된다.

#### 4. 전역 객체의 let
var 키워드 전역 변수와 전역 함수 등은 암묵적으로 전역 객체인 window의 프로퍼티가 된다.

그러나 let 키워드 전역 변수는 <strong>전역 객체의 프로퍼티가 아니다.</strong> let 전역 변수의 경우 보이지 않는 개념적인 블록 내에 존재하게 된다.

---

### const 키워드
const 키워드는 기본적으로 상수를 선언하기 위해 사용한다. const는 let과 유사하므로 let과 다른 점을 중점으로 알아보자.

#### 1. 선언과 초기화
const 키워드 변수는 반드시 선언과 동시에 초기화해야 한다.

#### 2. 재할당 금지
let 키워드 변수의 경우 재할당이 자유로운 반면 const 키워드 변수는 재할당이 금지된다.

#### 3. 상수
2번의 특징으로 const 키워드를 상수 표현에 사용하기도 한다. 상수는 재할당이 금지된 변수를 말한다. 변하지 않는 값을 변수에 할당해 고정 사용할 경우 유지보수성이 향상된다. 이 경우 일반적으로 대문자로 선언하여 상수임을 명확히 한다.

#### 4. const 키워드와 객체
const 키워드 변수는 <u>재할당이 불가</u>하지만, 객체가 할당된 경우 객체의 성격 - <u>재할당 없이 직접 변경</u>이 가능 - 에 의해 값을 변경할 수 있다.

---

### var vs let vs const
ES6를 사용한다면 var을 사용하지 않고 let 과 const를 활용하는게 좋다. 기본적으로 const를 사용하며 재할당이 필요하다고 판단될 때 let의 사용에 대해 생각해보면 된다.

---

