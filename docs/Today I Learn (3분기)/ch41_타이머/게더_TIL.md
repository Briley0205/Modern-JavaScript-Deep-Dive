## 📕 오늘 공부한 내용, 이렇게 정리해 봅시다. ✒

**TIL(Today I learn) 기록일** : 2022.09.14

**오늘 읽은 범위** : 41장 타이머

### 메트로놈 📑

- 함수를 명시적으로 호출하면 즉시 실행된다. 타이머 함수는 일정 시간이 경과된 이후에 호출되거나, 일정 시간마다 호출하는 용도로 쓰기 위해 만들어졌다. 이를 호출 스케줄링이라고 한다.

- 자바스크립트는 setTimeout과 setInterval, 그리고 remove용으로 clearTimeout, clearInterval을 제공한다. 이걸 적절히 사용해서 타이머를 구성하면 된다. 타이머 함수는 빌트인 함수는 아니지만 브라우저 환경과 노드 환경에서 공통적으로 사용할 수 있는 호스트 객체이다.

- 원리는 간단하게 타이머를 걸어두는 것이다. setTimeout은 시간이 만료되면 한번 호출, setInterval은 시간이 만료될 때마다 반복 호출된다.

- 자바스크립트는 사실 싱글스레드이기 때문에 두가지 이상의 태스크를 동시에 실행할 수 없다. 타이머 함수들은 브라우저 등 기타 환경의 도움을 받아 비동기 방식으로 독립적으로 동작한다.

---

### 타이머 함수의 구성 📑

```js
function appleTree(apple) {
  console.log(apple);
}

const timer = setTimeout(appleTree, 1000, "redApple");
// 첫번째 인수는 함수, 두번째는 딜레이 타임, 세번째는 같이 전달해줄 인수
// (여러개일 경우 ,를 구분자로 사용한다.)
```

- 대략 이런 구성으로 인라인에 화살표 함수로 바로 코드를 만들어도 된다.
- setTimeout 함수는 리턴값으로 생성된 타이머를 식별할 수 있는 고유한 아이디를 반환하는데 이때 환경이 브라우저면 숫자, 노드면 객체이다. clearTimeout에 인수로 timer 식별자를 전달해주면 setTimeout을=호출스케줄링을 취소할 수 있다.

- setInterval도 여러번 실행된다는 결과만 제외하면 setTimeout과 같다.

### 디바운스와 스로틀 📑

- 디바운스와 스로틀은 따로 존재하는 함수는 아니고 setTimeout 등을 이용해서 최적화를 위한 개념을 구현하는 것에 가깝다.

- 둘다 짧은 시간 동안 무수히 발생하는 이벤트를 그룹화해서 과도한 이벤트 핸들러 호출을 방지하는 프로그래밍 기법이다. 두개의 쓰임새는 조금 다르다.

- 아마 커스텀 훅을 만들려고 생각했을때 가장 처음 시도해보는게 디바운스와 스로틀일 가능성이 높다. 입력에 훅을 사용해서 전처리를 거치는 과정이 개념을 이해하기 좋기 때문일 것이다.

- 디바운스는 디바운스 함수에 전달된 시간보다 짧은 간격으로 이벤트 발생 시 타이머요청을 모두 취소하고 입력이 멈춘 것을 확인한 다음에 딱 한번만 호출하게 한다. 인풋의 필드 자동완성, 버튼 중복클릭 방지, 리사이즈 이벤트 처리 등에 유용하다.

- 스로틀은 이벤트가 연속해서 몇천번을 발생하더라도 인수로 전달된 시간 단위당 최대 한번씩만 호출되도록 한다. 스크롤 애니메이션처럼 섬세할 필요는 없지만 즉각적인 반응이 필요한 곳에서 유용하게 쓰인다. 스크롤, 무한스크롤, 버추얼스크롤 등등...

### 열심히 열심히 📑

- 타이머는 무척 유용하다. 면접때 셋타임아웃과 프로미스가 브라우저에서 다른 큐에 담긴다는걸 아냐고 물었을때 멍했던 기억이 난다...
