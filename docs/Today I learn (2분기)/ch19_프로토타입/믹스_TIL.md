## 📕 『모던 자바스크립트 Deep Dive』 오늘 읽은 내용 ✒

**TIL(Today I learn) 기록일** : 2022.08.08-09

### 19장 프로토타입 Part 1 📑
---
### 객체지향 프로그래밍
__자바스크립트는 프로토타입 기반의 객체지향 프로그래밍 언어이다.__<br>
- 여러 개의 독립적 단위인 객체의 집합으로 프로그램을 표현하려는 프로그래밍 패러다임

독립적 단위인 객체는 다른 객체와 관계성을 가진다.

---

### 객체의 상속과 프로토타입
객체는 다른 객체의 프로퍼티 또는 메서드를 __상속__ 받을 수 있다. <br>
그리고 이것은 __프로토타입__ 을 기반으로 구현된다.<br>
기존에 사용된 것을 상속받아 재사용함으로서 불필요한 중복을 제거할 수 있다.

__생성자 함수가 생성한 모든 인스턴스는 상위 객체 역할을 하는 prototype의 모든 프로퍼티와 메서드를 상속받는다.__

```

생성자함수 -----> 생성자함수.prototype (프로토타입 객체 - 상위 객체)
   |                     (constructor 프로퍼티)
   |                        ^
   |                        | 상속, __proto__로 간접 접근
   |                        |
   |---------> 생성자 함수 인스턴스 (prop or method) (하위 객체)

```

---
### 프로토타입 객체 (= 프로토타입)
프로토타입은 객체 간 상속을 구현하기 위해 사용된다.<br>
이는 객체의 상위 객체 역할을 하는 객체로 다른 객체에 <u>공유 프로퍼티를 제공</u>한다.<br>
상속 받은 하위 객체는 상위 객체의 프로퍼티를 자신의 프로퍼티처럼 자유롭게 사용할 수 있다.<br>
모든 객체는 하나의 프로토타입을 가지며 모든 프로토타입은 생성자 함수와 연결되어 있다.

1. 모든 객체는 `__proto__` 접근자 프로퍼티를 통해 자신의 [[Prototype]] 내부 슬롯에 간접적으로 접근할 수 있다. <br>
- 이는 상호 참조에 의해 프로토타입 체인이 생성되는 것을 방지하기 위해서이다. 프로토타입 체인은 한쪽 방향으로 프로퍼티 검색이 흘러가야 한다.
- `get Object.prototype.__proto__` / `set Object.prototype.__proto__` 대신 참조 취득 시엔 `Object.getPrototypeOf` 프로토타입 교체를 원할 시엔 `Object.setPrototypeOf`를 사용한다.

2. 함수 객체의 prototype 프로퍼티
- 함수 객체만이 소유하는 prototype 프로퍼티는 생성자 함수가 생성할 인스턴스의 프로토타입을 가리킨다.
이는 생성자 함수가 자신이 생성할 인스턴스의 프로토타입을 할당하기 위해 사용된다.

3. 프로토타입의 constructor 프로퍼티와 생성자 함수
- 모든 프로토타입은 constructor 프로퍼티를 가진다. 이 constructor 프로퍼티는 prototype 프로퍼티로 자신을 참조하고 있는 생성자 함수를 가리킨다. 이 연결은 생성자 함수가 생성될 때 이뤄진다.

---
### 프로토타입의 생성 시점
프로토타입은 생성자 함수가 생성되는 시점에 더불어 생성된다. 둘은 __단독으로 존재할 수 없기 때문이다.__
1. __사용자 정의 생성자 함수__ 와 프로토타입 생성 시점
- 생성자 함수로서 호출할 수 있는 함수는 함수 정의가 평가되어 함수 객체를 생성하는 시점에 프로토타입도 더불어 생성된다.(non-constructior은 프로토타입이 생성되지 않는다.) 이는 함수 호이스팅으로 런타임 이전에 먼저 평가되어 함수 객체가 되고 이때 프로토타입도 생성된다.
2. __빌트인 생성자 함수__ 와 프로토타입 생성 시점
앞 챕터에서 살펴 본 Object, String, Number, Function, Array, RegExp, Date, Promise 등과 같은 빌트인 생성자 함수는 <u>전역 객체가 생성되는 시점에 생성</u>된다. 전역 객체는 코드가 실행되기 이전 단계에 자바스크립트 엔진에 의해 생성되는 특수한 객체이다.(window)

---
### 프로토타입 체인
자바스크립트는 해당 객체에 접근하려는 프로퍼티가 없다면 __내부 슬롯의 참조를 따라 부모 역할의 프로토타입 프로퍼티를 차례대로 검색한다.__ 이 연결고리를 <u>프로토타입 체인</u>이라 한다. <u>체인의 최상위는 언제나 Object.prototype</u>이다 __(체인의 종점)__.

#### 스코프 체인과 프로토타입 체인
프로토타입 체인 - 상속과 프로퍼티 검색을 위한 메커니즘<br>
스코프 체인 - 식별자 검색을 위한 메커니즘

이 둘은 서로 협력하여 식별자와 프로퍼티를 검색하는 데 사용된다.
