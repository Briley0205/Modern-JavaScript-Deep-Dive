## 📕 오늘 공부한 내용, 이렇게 정리해 봅시다. ✒

**TIL(Today I learn) 기록일** : 2022.08.17 - 19

**오늘 읽은 범위** : 23장 실행 컨텍스트

### ECMAScript 소스코드의 타입 📑

- 전역코드: 전역에 존재하는 소스코드(함수, 클래스의 내부코드는 포함x)
- 함수코드 : 함수 내부에 존재하는 소스코드(안에 중첩된건 포함x)
- eval코드 : built-in 전역 함수인 eval함수에 인수로 전달되어 실행되는 소스코드
- 모듈코드 : 모듈 내부에 존재하는 소스코드(안에 중첩된건 포함x)

- 이 4개가 실행컨텍스트를 생성한다.
- 이걸 4개의 타입으로 구분하는 이유는 타입에따라 생성과정과 관리내용이 다르기 때문이다.

---

### 실행컨텍스트가 생성되는 시점 📈

- 전역코드 : 전역코드가 평가되는 시점, 전역 스코프가 생성되기 전 생성
- 함수코드 : 함수코드가 평가되는 시점, 지역 스코프가 생성되기 전 생성
- eval코드 : eval코드는 strict mode에서 자신만의 독자적인 스코프를 생성하기에 eval코드가 평가되는 시점에 실행컨텍스트가 생성

- 모듈코드 : 모듈도 모듈별로 독립적인 모달스코프를 생성하므로 모듈코드의 평가 시점에 생성

---

### 소스코드의 평가와 실행 📈

- 순서 : 전역 객체 생성 => 소스코드의 평가 => 실행컨텍스트 생성 => 소스코드의 실행 => 실행결과 => 실행컨텍스트가 관리

- 평가과정에서는 실행컨텍스트를 생성하고 변수, 함수 등의 선언문만 먼저 실행하여 생성된 변수나 함수 식별자를 키로 실행 컨텍스트가 관리하는 스코프에 등록한다.

- 이렇게 실행컨텍스트를 만든 다음에 비로소 선언문을 제외한 소스코드를 순차적으로 실행한다. = 이를 런타임이라고 한다.

- 이때 소스코드 실행에 필요한 정보(변수나 함수 등의 참조) 는 실행컨텍스트에서 취득한다.

- 그리고 변수값의 변경 등 실행결과를 다시 실행컨텍스트가 관리하는 스코프에 등록한다.

---

### 렉시컬 환경

- 렉시컬 환경은 식별자와 식별자에 바인딩된 값, 그리고 상위 스코프에 대한 참조를 기록하는 자료구조로 실행 컨텍스트를 구성하는 컴포넌트다.

- 스코프를 구분하여 식별자를 등록하고 관리하는 저장소.

- 실행컨텍스트 스택이 코드의 실행 순서를 관리한다면 렉시컬 환경은 스코프와 식별자를 관리한다.

- 렉시컬환경은 2개의 컴포넌트로 구성되어 있다.

  - 환경레코드 : 해당 스코프에 포함된 식별자와 값, 참조를 관리
  - 외부에 대한 참조 : 상위 스코프의 렉시컬 환경 참조

### 후기

이제 자바스크립트 엔진의 실행과정에 대해 얘기해보라는게 무슨 뜻인지 알것 같다... 이걸 다 외워야하지만 그래도 알것같다는게 중요한거 아닐까.
