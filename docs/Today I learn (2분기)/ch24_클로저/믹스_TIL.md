## 📕 『모던 자바스크립트 Deep Dive』 오늘 읽은 내용 ✒

**TIL(Today I learn) 기록일** : 2022.08.19 ~ 20

### 24장 클로저 📑
---
### 렉시컬 스코프?
> 클로저는 함수와 그 함수가 선언된 렉시컬 환경과의 조합이다.

자바스크립트 엔진은 함수를 어디서 호출했는지가 아니라 __어디에 정의했는지에 따라 상위 스코프를 결정__ 한다. 함수를 어디서 호출하는지는 함수의 상위 스코프 결정에 어떠한 영향도 주지 않는다. 이는 __정적으로 결정되고 변하지 않는다.__

```
함수의 상위 스코프를 결정한다. = 렉시컬 환경의 외부 렉시컬 환경에 대한 참조에 저장할 참조값을 결정한다.
```

---
### 내부 슬롯 [[Environment]]
함수의 정의가 평가되어 함수 객체를 생성할 때 자신이 정의된 환경에 의해 결정된 상위 스코프의 참조를 함수 객체 자신의 내부슬롯 [[Environment]]에 저장한다. 

즉 여기에 저장된 상위 스코프의 참조는 현재 실행 중인 실행 컨텍스트의 렉시컬 환경을 가리킨다.<br>
```
함수 정의가 평가되어 함수 객체를 생성하는 시점 - 상위 함수가 평가 또는 실행되고 있는 시점 - 현재 실행 중인 실행 컨텍스트의 렉시컬 환경을 가리킴
```

함수 객체의 내부 슬롯 [[Environment]]에 저장된 현재 실행 중인 실행 컨텍스트의 렉시컬 환경의 참조가 바로 상위 스코프이다. 함수 객체는 내부 슬롯 [[Environment]]에 저장한 렉시컬 환경의 참조, 즉 __상위 스코프를 자신이 존재하는 한 기억한다.__

---
### 클로저와 렉시컬 환경
외부 함수보다 중첩 함수가 더 오래 유지되는 경우 __중첩 함수는 이미 생명 주기가 종료한 외부 함수의 변수를 참조할 수 있다.__ 이러한 중첩 함수를 __클로저__ 라고 부른다. <br>
함수를 어디서 호출하든 상관없이 함수는 언제나 자신이 기억하는 상위 스코프의 식별자를 참조할 수 있으며 식별자에 바인딩된 값을 변경할 수도 있다.

자바스크립트의 모든 함수는 상위 스코프를 기억하므로 이론적으로 모든 함수는 클로저다. 하지만 __상위 스코프의 어떤 식별자도 참조하지 않는 함수는 클로저가 아니다.__
즉 클로저란, 중첩 함수가 상위 스코프의 식별자를 참조하고 있고 중첩 함수가 외부 함수보다 더 오래 유지되는 경우에 한정하는 것이 일반적이다.

---
### 클로저의 활용
클로저는 __상태를 안전하게 변경하고 유지하기 위해 사용__ 한다. 즉 상태가 의도치 않게 변경되지 않도록 __상태를 안전하게 은닉하고 특정 함수에게만 상태 변경을 허용__ 하기 위해 사용된다. 

---
### 캡슐화와 정보 은닉?
캡슐화는 객체의 상태를 나타내는 프로퍼티와 프로퍼티를 참조하고 조작할 수 있는 동작인 메서드를 하나로 묶는 것을 말한다.
캡슐화는 특정 프로퍼티나 메서드를 감출 목적으로 사용하기도 하는데 이를 정보 은닉이라 한다.
- 정보 은닉은 외부에 공개할 필요가 없는 구현의 일부를 감추어 적절치 못한 접근으로부터 객체의 상태가 변경되는 것을 방지해 정보를 보호한다.
- 객체 간의 상호 의존성, 즉 결합도를 낮추는 효과가 있다.

----